@model IEnumerable<Models.Doctor>

@{
    ViewData["Title"] = "All Doctors";
}
<!-- StyleSheet -->
<link rel="stylesheet" href="css/DoctorTable.css">

<!-- Main Container -->
<div class="container mt-5">
    <!-- Page Title -->
    <h1 class="text-center mb-4">All Doctors</h1>

    <!-- Filter Input -->
    <div class="filter-container text-center mb-4">
        <input type="text" id="doctorNameFilter" class="filter-input form-control w-50 mx-auto" placeholder="Search by Doctor Name" onkeyup="filterDoctorsByName()" />
    </div>

    <!-- Doctors Table -->
    <div class="table-responsive">
        <table class="table table-hover table-bordered" id="doctorsTable">
            <thead class="thead-dark">
                <tr>
                    <th>@Html.DisplayNameFor(model => model.Name)</th>
                    <th>@Html.DisplayNameFor(model => model.JobTitle)</th>
                    <th>Subjects</th>
                    <th>Faculties</th>
                    <th>Departments</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.Name)</td>
                        <td>@Html.DisplayFor(modelItem => item.JobTitle)</td>
                        <td>
                            <ul class="list-unstyled">
                                @if (ViewBag.Subjects.ContainsKey(item.Id))
                                {
                                    @foreach (var subject in ViewBag.Subjects[item.Id])
                                    {
                                        <li>@subject</li>
                                    }
                                }
                                else
                                {
                                    <li>No subjects assigned</li>
                                }
                            </ul>
                        </td>
                        <td>
                            <ul class="list-unstyled">
                                @if (ViewBag.DoctorColleges.ContainsKey(item.Id))
                                {
                                    @foreach (var college in ViewBag.DoctorColleges[item.Id])
                                    {
                                        <li>@college</li>
                                    }
                                }
                                else
                                {
                                    <li>No colleges assigned</li>
                                }
                            </ul>
                        </td>
                        <td>
                            <ul class="list-unstyled">
                                @if (ViewBag.DoctorDepartments.ContainsKey(item.Id))
                                {
                                    @foreach (var department in ViewBag.DoctorDepartments[item.Id])
                                    {
                                        <li>@department</li>
                                    }
                                }
                                else
                                {
                                    <li>No departments assigned</li>
                                }
                            </ul>
                        </td>
                        <td class="text-center">
                            <a href="@Url.Action("Details", "Doctor", new { id = @item.Id })" class="action-link text-decoration-none mx-1">
                                <img width="25" height="25" src="https://img.icons8.com/ios/50/1A1A1A/info--v1.png" alt="Details" />
                            </a>
                            <a href="@Url.Action("Edit", "Doctor", new { id = @item.Id })" class="action-link text-decoration-none mx-1">
                                <img width="20" height="20" src="https://img.icons8.com/pastel-glyph/64/1A1A1A/create-new--v2.png" alt="Edit" />
                            </a>
                            <form asp-action="Delete" asp-route-id="@item.Id" method="post" style="display: inline;" class="mx-1">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this doctor?');">Delete</button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <!-- Script -->
        <script src="/js/Doctor.js"></script>
    </div>
</div>
